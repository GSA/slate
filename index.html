<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <link href="stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      <script src="javascripts/all.js" type="text/javascript"></script>

      <script>
        $(function() {
          setupLanguages(["sh"]);
        });
      </script>
  </head>

  <body class="index">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="sh">sh</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='http://search.digitalgov.gov'>Sign Up for a Developer Key</a></li>
            <li><a href='http://github.com/tripit/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<p>Welcome to the i14y Content API! You can use our API to publish your CMS documents into our indexes to power your DigitalGov Search box.</p>

<p>By hooking into the existing lifecycle of documents in your CMS, you can create/update/delete the associated documents in our indexes via this Content API.</p>

<p>Ruby/Python/Node clients are welcome.</p>

<h1 id="authentication">Authentication</h1>

<blockquote>
<p>To authorize, use this code:</p>
</blockquote>
<pre class="highlight shell"><code><span class="c"># With curl, you can just pass the correct header with each request</span>
curl <span class="s2">"https://i14y.usa.gov/api/v1/documents"</span>
  -XPOST 
  -u your_collection_handle:your_secret_token 
</code></pre>

<blockquote>
<p>Make sure to replace <code class="prettyprint">your_collection_handle</code> with the name you were issued, and make sure you replace <code class="prettyprint">your_secret_token</code> with the API key you were given.</p>
</blockquote>

<p>The i14y API uses keys to allow access to the API. For now, you can request access via <a href="mailto:search@support.digitalgov.gov">email</a>.</p>

<p>The i14y API expects the key to be included in all API requests to the server in a Basic authentication header that looks like the following:</p>

<p><code class="prettyprint">Authorization: Basic qG9yZW46bG9yZW5pMTR5dG9rZW4=</code></p>

<aside class="notice">
You must replace <code>your_collection_handle</code> and <code>your_secret_token</code> with your personal collection handle and API key.
</aside>

<h1 id="https">HTTPS</h1>

<p>All access to the i14y Content API must use SSL.</p>

<h1 id="documents">Documents</h1>

<h2 id="create-a-document">Create a document</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://i14y.usa.gov/api/v1/documents"</span>
  -XPOST 
  -u your_collection_handle:your_secret_token
  -d <span class="s1">'{"document_id":"1",
      "title":"this is a fairly short title",
      "path": "http://www.gov.gov/cms/doc1.html", 
      "created": "2015-05-12T22:35:09Z",
      "description":"some more information here on the document", 
      "content":"the long form body of the document", 
      "promote": false, 
      "language" : "en"
      }'</span>
</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
</span><span class="s2">"status"</span><span class="p">:</span><span class="mi">200</span><span class="p">,</span><span class="w">
</span><span class="s2">"developer_message"</span><span class="p">:</span><span class="s2">"OK"</span><span class="p">,</span><span class="w">
</span><span class="s2">"user_message"</span><span class="p">:</span><span class="s2">"Your document was successfully created."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint creates a document.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://i14y.usa.gov/api/v1/documents</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>document_id</td>
<td>true</td>
<td>A document ID that is unique to your CMS.</td>
</tr>
<tr>
<td>title</td>
<td>true</td>
<td>Document title.</td>
</tr>
<tr>
<td>path</td>
<td>true</td>
<td>Document link URL.</td>
</tr>
<tr>
<td>created</td>
<td>true</td>
<td>When document was initially created (e.g., &lsquo;2013-02-27T10:00:00Z&rsquo;)</td>
</tr>
<tr>
<td>description</td>
<td>false</td>
<td>Document description.</td>
</tr>
<tr>
<td>content</td>
<td>false</td>
<td>Document content.</td>
</tr>
<tr>
<td>changed</td>
<td>false</td>
<td>When document was modified (e.g., &#39;2013-02-27T10:00:01Z&rsquo;)</td>
</tr>
<tr>
<td>promote</td>
<td>false</td>
<td>Whether to promote the document in the relevance ranking</td>
</tr>
<tr>
<td>language</td>
<td>false</td>
<td>Two-letter locale describing language of document (defaults to &#39;en&rsquo;)</td>
</tr>
</tbody></table>

<aside class="success">
Remember â€” you must pass in at least one of description or content, preferably both!
</aside>

<h2 id="update-a-document">Update a document</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://i14y.usa.gov/api/v1/documents/{document_id}"</span>
  -XPUT 
  -u your_collection_handle:your_secret_token
  -d <span class="s1">'{"title":"check out this info...today only!",
      "promote": true"
      }'</span>
</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
</span><span class="s2">"status"</span><span class="p">:</span><span class="mi">200</span><span class="p">,</span><span class="w">
</span><span class="s2">"developer_message"</span><span class="p">:</span><span class="s2">"OK"</span><span class="p">,</span><span class="w">
</span><span class="s2">"user_message"</span><span class="p">:</span><span class="s2">"Your document was successfully updated."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint updates a document.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">PUT https://i14y.usa.gov/api/v1/documents/{document_id}</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>title</td>
<td>false</td>
<td>Document title.</td>
</tr>
<tr>
<td>path</td>
<td>false</td>
<td>Document link URL.</td>
</tr>
<tr>
<td>created</td>
<td>false</td>
<td>When document was initially created (e.g., &#39;2013-02-27T10:00:00Z&rsquo;)</td>
</tr>
<tr>
<td>description</td>
<td>false</td>
<td>Document description.</td>
</tr>
<tr>
<td>content</td>
<td>false</td>
<td>Document content.</td>
</tr>
<tr>
<td>changed</td>
<td>false</td>
<td>When document was modified (e.g., &#39;2013-02-27T10:00:01Z&rsquo;)</td>
</tr>
<tr>
<td>promote</td>
<td>false</td>
<td>Whether to promote the document in the relevance ranking</td>
</tr>
<tr>
<td>language</td>
<td>false</td>
<td>Two-letter locale describing language of document (defaults to &#39;en&rsquo;)</td>
</tr>
</tbody></table>

<aside class="success">
Your updates are reflected in your search results within seconds!
</aside>

<h2 id="delete-a-document">Delete a document</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://i14y.usa.gov/api/v1/documents/{document_id}"</span>
  -XDELETE 
  -u your_collection_handle:your_secret_token
</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
</span><span class="s2">"status"</span><span class="p">:</span><span class="mi">200</span><span class="p">,</span><span class="w">
</span><span class="s2">"developer_message"</span><span class="p">:</span><span class="s2">"OK"</span><span class="p">,</span><span class="w">
</span><span class="s2">"user_message"</span><span class="p">:</span><span class="s2">"Your document was successfully deleted."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint deletes a document.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">DELETE https://i14y.usa.gov/api/v1/documents/{document_id}</code></p>

<aside class="success">
Remember- The `document_id` is what you assigned the document when you created it.
</aside>

          <h1 id="errors">Errors</h1>

<p>The i14y API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request &ndash; There is a problem with your request</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error &ndash; There is a problem with our server and we&rsquo;ve been notified. Try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="sh">sh</a>
          </div>
      </div>
    </div>
  </body>
</html>
